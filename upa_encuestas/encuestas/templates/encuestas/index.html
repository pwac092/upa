<!DOCTYPE HTML>
<!--
	Hyperspace by HTML5 UP
	html5up.net | @n33co
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
{% load staticfiles %}
<html>
	<head>
		<title>Encuestas UPA</title>
		<meta charset="utf-8" />
        <!--[if lte IE9] <link rel="stylesheet" href="{% static "encuestas/assets/css/ie9.css" %}" />![endif]-->
        <!--[if lte IE9] <link rel="stylesheet" href="{% static "encuestas/assets/css/ie8.css" %}" />![endif]-->
        <!--[if lte IE9] <link rel="stylesheet" href="{% static "encuestas/assets/js/ie/html5shiv.js" %}" />![endif]-->

		<meta name="viewport" content="width=device-width, initial-scale=1" />

        <link rel="stylesheet" href="{% static "encuestas/assets/css/main.css" %}" />
        <link rel="stylesheet" href="{% static "encuestas/assets/css/jquery-ui.css" %}">
        <style>
            /* Start by setting display:none to make this hidden.
               Then we position it in relation to the viewport window
               with position:fixed. Width, height, top and left speak
               for themselves. Background we set to 80% white with
               our animation centered, and no-repeating */
            .modal {
                display:    none;
                position:   fixed;
                z-index:    1000;
                top:        0;
                left:       0;
                height:     100%;
                width:      100%;
                background: rgba( 255, 255, 255, .8 ) 
                            url({% static "encuestas/assets/images/ajax-loader.gif"%} );
                            50% 50% 
                            no-repeat;
            }

            /* When the body has the loading class, we turn
               the scrollbar off with overflow:hidden */
            body.loading {
                overflow: hidden;   
            }

            /* Anytime the body has the loading class, our
               modal element will be visible */
            body.loading .modal {
                display: block;
            }
        </style>

	</head>
    
	<body>

		<!-- Sidebar -->
			<section id="sidebar">
					<nav>
						<ul>
							<li><a href="#clases">Clases</a></li>
							<li><a href="#profesores">Profesores</a></li>
                            {% if user.is_authenticated %}
                            <!--<li><a href="/encuestas/logout">Cerrar sesi&oacute;n</a></li>-->
                                <li><a href="#" id="sync">Sincronizar encuestas</a></li>
                            {%endif%}
                            <!--<li><a href="#alumnos">Alumnos</a></li>-->
						</ul>
					</nav>
			</section>

		<!-- Wrapper -->
			<div id="wrapper">
				<!-- Intro -->
					<!--<section id="agregar" class="wrapper style1 fullscreen fade-up">
						<div class="inner">
							<h1>Agregar nueva evaluaci&oacute;n</h1>
							<ul class="actions">
                                {% for i in clases %}
                                    <li><a href="/encuestas/lista/{{i.1}}/1/" class="button scrolly">{{i.0}}</a></li>
                                {% endfor %}
							</ul>
						</div>
                        </section>-->

				<!-- Intro -->
					<section id="clases" class="wrapper style1 fullscreen fade-up">
						<div class="inner">
							<h1>Clases</h1>
							<ul class="actions">
                                                            {% for i in clases %}
                                                                <li><a href="/encuestas/lista/{{i.1}}/1/" class="button scrolly" style="margin-top:8px">{{i.0}}</a></li>
                                                            {% endfor %}
							</ul>
						</div>
					</section>

				<!-- One -->
					<section id="profesores" class="wrapper style1 fullscreen fade-up">
						<div class="inner">
							<h1>Profesores</h1>
                            <ul class="actions">
                                {% for i in profesores%}
                                    <li><a href="/encuestas/lista/{{i.1}}/2/" class="button scrolly" style="margin-top:8px">{{i.0}}</a></li>
                                {% endfor %}
                            </ul>
                        </div>
					</section>

				<!-- Two 
					<section id="alumnos" class="wrapper style3 fade-up">
						<div class="inner">
							</div>
						</div>
                        </section>-->
			</div>


		<!-- Scripts -->
        <script src="{%static "encuestas/assets/js/jquery.min.js" %}"></script>
        <script src="{%static "encuestas/assets/js/jquery.scrollex.min.js" %}"></script>
        <script src="{%static "encuestas/assets/js/jquery.scrolly.min.js" %}"></script>
        <script src="{%static "encuestas/assets/js/skel.min.js" %}"></script>
        <script src="{%static "encuestas/assets/js/util.js" %}"></script>
        <script src="{%static "encuestas/assets/js/main.js" %}"></script>
        <script src="{% static "encuestas/assets/js/jquery-ui.js" %}"></script>
        <!--[if lte IE 8]><script src="{% static "encuestas/assets/js/ie/respond.min.js" %}"></script><![endif]-->

        <div id="dialogER" title="Error. No se pudo sincronizar el servidor">
            <p>El proceso de sincronizaci&aacute; ha fallado. Por favor intente nuevamente en unos minutos<p>
        </div>

	</body>

    <script>
        $( document ).ready(function() {
            $body = $("body");


            $( "#dialogER" ).dialog({
                  closeOnEscape: true,
                  modal: true,
                  position: 'top',
                  width: 800,
                  height: 600,
                  autoOpen: false  ///added this line
            });


            $("#sync").click(function(){
                $.ajax ({
                  type: "POST",
                  url: 'sync/',
                  data: { },
                  ajaxStart: function () { 
                      $("#body").addClass("loading")
                  },
                  success: function(response) {
                    $("#body").removeClass("loading")
                  },
                  error: function(xhr, text, error) {
                      $body.removeClass("loading")
                      $("#dialogER").dialog()
                  }
                });
            });
        });
    </script>
    <div class="modal"><!-- Place at bottom of page --></div>
</html>
